<!doctype html>
<html lang="en" class="h-full dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Merchant Haus – Sign In</title>

    <!-- Preconnect to Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@700&family=Lexend:wght@100;400&family=Major+Mono+Display&display=swap" rel="stylesheet">

    <!-- TailwindCSS CDN for rapid styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Lexend', 'system-ui', '-apple-system', 'Segoe UI', 'Roboto', 'Ubuntu', 'Cantarell', 'Noto Sans', 'Helvetica Neue', 'Arial', 'Apple Color Emoji', 'Segoe UI Emoji', 'sans-serif'],
              display: ['Ubuntu', 'system-ui', 'sans-serif'],
              mono: ['"Major Mono Display"', 'monospace']
            },
            colors: {
              brand: {
                50:  '#fff0f2',
                100: '#ffd9df',
                200: '#ffb3c0',
                300: '#ff8ea1',
                400: '#ef3c5b',
                500: '#e52b4c',
                600: '#dc2743',
                700: '#c21b35',
                800: '#981329',
                900: '#5e0a19'
              },
              mint: '#6dffca'
            },
            boxShadow: {
              'glow': '0 10px 40px rgba(220,39,67,.35)'
            }
          }
        }
      }
    </script>

    <style>
      :root {
        --brand-400: #ef3c5b;
        --brand-600: #dc2743;
        --brand-700: #c21b35;
        --mint: '#6dffca';
      }
      body { font-family: Lexend, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, 'Apple Color Emoji', 'Segoe UI Emoji', sans-serif; }

      /* background radial gradients */
      .page-bg::before {
        content: '';
        position: absolute;
        inset: -20vmax;
        background:
          radial-gradient(60vmax 60vmax at 15% 25%, rgba(220,39,67,.25), transparent 60%),
          radial-gradient(60vmax 60vmax at 85% 30%, rgba(109,255,202,.20), transparent 60%),
          radial-gradient(70vmax 70vmax at 50% 85%, rgba(226,232,240,.08), transparent 60%);
        filter: blur(40px);
        animation: drift 18s linear infinite;
        z-index: 0;
      }
      @keyframes drift {
        0%   { transform: translate3d(0,0,0) rotate(0deg); }
        50%  { transform: translate3d(1.8%, -1.2%, 0) rotate(180deg); }
        100% { transform: translate3d(0,0,0) rotate(360deg); }
      }

      @property --angle { syntax: '<angle>'; initial-value: 0deg; inherits: false; }
      .glow-wrap {
        position: relative; padding: 2px; border-radius: 18px;
        background: conic-gradient(from var(--angle),
          rgba(220,39,67,.95), rgba(220,39,67,.35) 18%, rgba(109,255,202,.95) 35%,
          rgba(220,39,67,.35) 52%, rgba(239,60,91,.95) 70%, rgba(109,255,202,.45) 86%,
          rgba(220,39,67,.95));
        animation: spin 6s linear infinite;
        box-shadow: 0 0 0 1px rgba(255,255,255,.03), 0 15px 60px rgba(220,39,67,.25);
      }
      @keyframes spin { to { --angle: 360deg; } }
      .glow-wrap > .card {
        border-radius: 16px;
        background: rgba(22,22,22,.86);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
      }
      .brand-underline { height:3px; background:linear-gradient(90deg, var(--brand-600), var(--mint)); filter:saturate(120%); border-radius:9999px; box-shadow:0 0 18px rgba(220,39,67,.45); position:relative; overflow:hidden; }
      .brand-underline::after { content:''; position:absolute; inset:0; background:linear-gradient(90deg, transparent, rgba(255,255,255,.45), transparent); transform:translateX(-100%); animation:sweep 2.8s ease-in-out infinite; }
      @keyframes sweep { 0%{transform:translateX(-100%)} 60%{transform:translateX(100%)} 100%{transform:translateX(100%)} }
    </style>
  </head>
  <body class="h-full bg-slate-950 text-slate-100 relative overflow-hidden">
    <div class="page-bg absolute inset-0"></div>

    <main class="relative z-10 min-h-screen flex flex-col items-center justify-center p-6">
      <!-- Hero section with sparkles -->
      <div class="h-64 relative w-full flex flex-col items-center justify-center overflow-hidden rounded-md">
        <div class="w-full absolute inset-0 h-full">
          <div id="tsparticles" class="w-full h-full"></div>
        </div>
        <h1 class="md:text-7xl text-5xl lg:text-6xl font-mono text-center text-white relative z-20">
          HausManager
        </h1>
      </div>
      <!-- Sign In card -->
      <div class="w-full max-w-md">
        <div class="glow-wrap">
          <div class="card shadow-glow">
            <div class="px-7 pt-7 pb-4">
              <h1 class="font-display text-2xl tracking-tight">Merchant <span class="text-brand-400">Haus</span></h1>
              <div class="brand-underline mt-3"></div>
            </div>
            <!-- Step 1: email and password -->
            <form id="auth-step-1" class="px-7 pb-7 space-y-4">
              <div class="space-y-1.5">
                <label for="email" class="text-sm text-slate-300">Email</label>
                <input id="email" type="email" required autocomplete="username" class="w-full rounded-xl bg-slate-900 border border-slate-800 px-4 py-3 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-brand-600 focus:border-transparent" placeholder="you@example.com">
              </div>
              <div class="space-y-1.5">
                <label for="password" class="text-sm text-slate-300">Password</label>
                <input id="password" type="password" required autocomplete="current-password" class="w-full rounded-xl bg-slate-900 border border-slate-800 px-4 py-3 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-brand-600 focus:border-transparent" placeholder="••••••••">
              </div>
              <div id="login-error" class="text-red-500 text-sm hidden">Invalid credentials, please try again.</div>
              <div class="flex items-center justify-between pt-1">
                <label class="flex items-center gap-2 text-sm text-slate-400">
                  <input type="checkbox" class="rounded border-slate-700 bg-slate-900 text-brand-600 focus:ring-brand-600"> Remember me
                </label>
                <a href="#" class="text-sm text-slate-300 hover:text-white">Forgot password?</a>
              </div>
              <button id="login-btn" class="w-full mt-2 inline-flex items-center justify-center gap-2 rounded-xl bg-brand-600 hover:bg-brand-700 px-4 py-3 font-medium text-white transition-colors">
                Continue
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.6">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"/>
                </svg>
              </button>
            </form>
            <!-- Step 2: two-factor code -->
            <form id="auth-step-2" class="px-7 pb-7 space-y-4 hidden" aria-hidden="true">
              <p class="text-slate-300">Enter the 6-digit code we sent to <span class="text-white font-medium">your email</span>.</p>
              <div class="grid grid-cols-6 gap-2">
                <input inputmode="numeric" maxlength="1" class="h-12 text-center rounded-lg bg-slate-900 border border-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-600">
                <input inputmode="numeric" maxlength="1" class="h-12 text-center rounded-lg bg-slate-900 border border-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-600">
                <input inputmode="numeric" maxlength="1" class="h-12 text-center rounded-lg bg-slate-900 border border-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-600">
                <input inputmode="numeric" maxlength="1" class="h-12 text-center rounded-lg bg-slate-900 border border-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-600">
                <input inputmode="numeric" maxlength="1" class="h-12 text-center rounded-lg bg-slate-900 border border-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-600">
                <input inputmode="numeric" maxlength="1" class="h-12 text-center rounded-lg bg-slate-900 border border-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-600">
              </div>
              <div class="flex items-center justify-between">
                <button type="button" id="back-btn" class="text-sm text-slate-300 hover:text-white">Back</button>
                <button id="verify-btn" class="inline-flex items-center justify-center rounded-xl bg-brand-600 hover:bg-brand-700 px-4 py-2 font-medium text-white">Verify &amp; Sign in</button>
              </div>
            </form>
        </div>
      </div>
        <section class="mx-auto mt-10 max-w-3xl px-6">
          <div class="rounded-2xl border border-slate-800 bg-slate-900/60 p-6 shadow-2xl shadow-brand-900/30">
            <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
              <div>
                <p class="text-sm font-semibold uppercase tracking-wide text-slate-400">New</p>
                <h2 class="text-xl font-semibold text-white">Haus Portal</h2>
                <p class="mt-1 text-sm text-slate-400">Partner + merchant workspace wired to NMI v4 via Netlify Functions. Manage merchants, billing, commissions, and merchant-side payments with Collect.js tokenisation.</p>
              </div>
              <div class="flex flex-col items-stretch gap-2 sm:w-56">
                <a href="public/login.html" class="inline-flex items-center justify-center gap-2 rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700">
                  Open Haus Portal
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4 w-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12h15m0 0l-6-6m6 6l-6 6" />
                  </svg>
                </a>
                <p class="text-xs text-slate-400">Partner lane: merchants, users, billing, commissions. Merchant lane: payments, subscriptions, vault, invoices.</p>
              </div>
            </div>
          </div>
        </section>
        <p class="mt-6 text-center text-xs text-slate-500">
          By signing in you agree to the <a class="hover:text-slate-300" href="#">Terms</a> and <a class="hover:text-slate-300" href="#">Privacy Policy</a>.
        </p>
      </div>
    </main>

    <!-- TSParticles for sparkles -->
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/slim@3/tsparticles.slim.bundle.min.js"></script>
    <script>
      const step1 = document.getElementById('auth-step-1');
      const step2 = document.getElementById('auth-step-2');
      const backBtn = document.getElementById('back-btn');
      const loginBtn = document.getElementById('login-btn');
      const verifyBtn = document.getElementById('verify-btn');
      const errorMsg = document.getElementById('login-error');

      // Basic login validation. In a real application this would call the server to authenticate.
      step1.addEventListener('submit', (e) => {
        e.preventDefault();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;
        if (email === '' || password === '') {
          errorMsg.classList.remove('hidden');
          errorMsg.textContent = 'Please enter your email and password.';
          return;
        }
        // Hide any previous error
        errorMsg.classList.add('hidden');
        // For demo purposes we accept any non-empty credentials
        step1.classList.add('hidden');
        step2.classList.remove('hidden');
        step2.removeAttribute('aria-hidden');
      });
      backBtn.addEventListener('click', () => {
        step2.classList.add('hidden');
        step1.classList.remove('hidden');
      });
      step2.addEventListener('submit', (e) => {
        e.preventDefault();
        // In a real app you'd verify the code; here we redirect to the gateway after sign‑in
        window.location.href = 'dashboard.html';
      });

      // Initialize sparkles
      (async () => {
        await tsParticles.load({
          id: "tsparticles",
          options: {
            background: { color: { value: "transparent" } },
            fpsLimit: 120,
            particles: {
              number: {
                value: 100,
                density: { enable: true, area: 800 },
              },
              color: { value: "#ffffff" },
              shape: { type: "circle" },
              opacity: { value: { min: 0.1, max: 0.5 } },
              size: { value: { min: 0.6, max: 1.4 } },
              move: {
                enable: true,
                speed: 0.5,
                direction: "none",
                random: true,
                straight: false,
                outModes: { default: "out" },
              },
            },
            interactivity: {
              events: {
                onHover: { enable: false },
                onClick: { enable: false },
              },
            },
            detectRetina: true,
          },
        });
      })();
    </script>
  </body>
</html>
